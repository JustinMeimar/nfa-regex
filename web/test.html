<!DOCTYPE html>
<html lang="EN">
  <head>
    <meta charset="utf-8" />
    <title>WebAssembly example</title>
    <script type="text/javascript" src="regex_web.js"></script>
    Hello, World
  </head>
  <body>
    <script>
      console.log("pre mod");
      // This function will be called when the WebAssembly module is ready
      Module.onRuntimeInitialized = function () {
        

        //declare class NFA
        //const NFA = Module.NFA;
        //declare create function
        const createNFA = Module.createNFA;
        const executeNFA = Module.executeNFA; 
        const getDidAccept = Module.getDidAccept;
        const getStates = Module.getStates; 
        const getAcceptStates = Module.getAcceptStates;
        
        const MyNFA = createNFA("a*");
        console.log(getDidAccept(MyNFA));     
        executeNFA(MyNFA, "a"); 
        console.log(getDidAccept(MyNFA));     
        console.log(getStates(MyNFA));

        const statesVec = getAcceptStates(MyNFA);
        const states = []
        console.log("size:", statesVec.size());
        for (let i = 0; i < statesVec.size(); i++) {
          states.push(statesVec[i]);
        }


        console.log(states);
        // create an NFA
      };

    </script>
        {# const MyNFA = createNFA("a&b");
        console.log(getDidAccept(MyNFA));     
        executeNFA(MyNFA, "a"); 
        console.log(getDidAccept(MyNFA));   
        console.log(MyNFA);  #}


    {# console.log("Here? I dot")
        const Point = Module.Point;
        const point = new Point();
        point.x = 3;
        point.y = 4;
        console.log(point.x);
        
        const ACCEPT = 1;
        const State = Module.State;
        const state = new State(Module.StateType.ACCEPT);
        const state2 = new State(Module.StateType.REJECT);
          
        console.log(state);
        console.log(state.type.value);
        console.log(state2.type.value); #}
  </body>
</html>

        {# const createNFALeaf= Module.createNFALeafFactory; #}
        {# const createNFABinaryOp = Module.createNFABinaryOpFactory; #}
        {# const createNFAUnaryOp = Module.createNFAUnaryOpFactory; #}